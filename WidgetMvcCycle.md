# Introduction #

This page summarizes the control flows used within the event-driven browser widget framework

# Details #

```
Initialization     External events <--+
 | (call)           |                 |
 |                  |                 |
 |<-----------------+                 |
 |       (subscribe)                  |
 |                          (publish) |
 |            +-->--------------------+
 |            |
 +--> Controller <--------------------------------------+ 
       |                                    (subscribe) |
       | (call)                                         |
       +--> Model                                       |
             |                                          |
             | (subscribe)                              |
             +--> Renderer                              |
                   |                                    |
                   | (call)                             |
                   +--> DOM                             |
                         |                              |
                         +--> user input collector -->--+
```

## Notes ##

  * All external inputs to the widget come via the controller element.  Initial values are passed directly to Javascript code that instantiates the widget;  other values are obtained via subscriptions to an external event distribution mechanism.  Values are provided to external components by publishing new events, to which other components may subscribe.
  * Widget initialization performs the following steps:
    * set initial model values
    * connect the various elements (create subscriptions as needed)
    * build the initial user interface display
  * All information flows within the widget strictly follow the cycle illustrated (e.g. the controller _never_ invokes the renderer directly.
  * The current state of the widget is reflected in the model.
  * The model is a generic object, with direct APIs for updating model values. The controller updates values in the model in response to external inputs of user inputs.
  * The renderer obtains information about updates to the model by subscribing to notifications generated by the model.  These notifications use an internal mechanism that is distinct from the external event publish/subscribe framework.
  * The renderer updates the user interface by direct manipulation of the DOM.  Alternative renderer implementations that use Flash or other rendering techniques are also planned.
  * User inputs are captured via a user input collector (typically implemented as part of the DOM renderer), and delivered to the controller by an internal notification mechanism.